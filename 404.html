<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Opening Movieland…</title>
    <script>
      // Supported routes
      const SUPPORTED = ["movie", "tv", "person"];

      const pathname = window.location.pathname; // e.g. /movie/123
      const parts = pathname.split("/").filter(Boolean); // ["movie", "123"]

      const type = parts[0];
      const id = parts[1];

      const fallback = "https://play.google.com/store/apps/details?id=com.github.af2905.movieland";

      if (SUPPORTED.includes(type) && id) {
        const intentUrl = `intent://${type}/${id}#Intent;scheme=https;package=com.github.af2905.movieland;end`;

        // Try to open app via intent
        window.location.replace(intentUrl);

        // If not installed, redirect to Play Store
        setTimeout(() => {
          window.location.href = fallback;
        }, 1500);
      } else {
        // Invalid URL – go to homepage or fallback
        window.location.href = fallback;
      }
    </script>
  </head>
  <body>
    <p>Redirecting to Movieland…</p>
  </body>
</html>
